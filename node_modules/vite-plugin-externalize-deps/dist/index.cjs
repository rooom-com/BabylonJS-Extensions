"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const o=require("node:fs"),f=require("node:module"),g=require("node:path"),h=s=>JSON.parse(o.readFileSync(s).toString()),x=(s={})=>{const n={deps:!0,devDeps:!1,except:[],include:[],nodeBuiltins:!0,optionalDeps:!0,peerDeps:!0,useFile:g.join(process.cwd(),"package.json"),...s};return{name:"vite-plugin-externalize-deps",config:(D,E)=>{if(!o.existsSync(n.useFile))throw new Error(`[vite-plugin-externalize-deps] The file specified for useFile (${n.useFile}) does not exist.`);const r=new Set,{dependencies:i={},devDependencies:p={},optionalDependencies:c={},peerDependencies:d={}}=h(n.useFile);n.deps&&Object.keys(i).forEach(e=>{const t=new RegExp(`^${e}(?:/.+)?$`);r.add(t)}),n.devDeps&&Object.keys(p).forEach(e=>{const t=new RegExp(`^${e}(?:/.+)?$`);r.add(t)}),n.nodeBuiltins&&f.builtinModules.forEach(e=>{const t=new RegExp(`^(?:node:)?${e}$`);r.add(t)}),n.optionalDeps&&Object.keys(c).forEach(e=>{const t=new RegExp(`^${e}(?:/.+)?$`);r.add(t)}),n.peerDeps&&Object.keys(d).forEach(e=>{const t=new RegExp(`^${e}(?:/.+)?$`);r.add(t)});const u=Array.from(r),a=e=>n.except.some(t=>typeof t=="string"?t===e:t.test(e)),l=e=>n.include.some(t=>typeof t=="string"?t===e:t.test(e));return{build:{rollupOptions:{external:e=>a(e)?!1:l(e)?!0:u.some(t=>t.test(e))}}}}}};exports.externalizeDeps=x;
//# sourceMappingURL=index.cjs.map
