(function(u,h){typeof exports=="object"&&typeof module<"u"?h(exports,require("@babylonjs/core/Maths/math"),require("@babylonjs/core/Cameras/camera"),require("@babylonjs/core/Rendering/renderingGroup"),require("@babylonjs/core/Misc/logger"),require("@babylonjs/core/Meshes/mesh"),require("@babylonjs/core/Meshes/Builders/planeBuilder"),require("@babylonjs/core/Materials/standardMaterial")):typeof define=="function"&&define.amd?define(["exports","@babylonjs/core/Maths/math","@babylonjs/core/Cameras/camera","@babylonjs/core/Rendering/renderingGroup","@babylonjs/core/Misc/logger","@babylonjs/core/Meshes/mesh","@babylonjs/core/Meshes/Builders/planeBuilder","@babylonjs/core/Materials/standardMaterial"],h):(u=typeof globalThis<"u"?globalThis:u||self,h(u["babylon-htmlmesh"]={},u.BABYLON,u.BABYLON,u.BABYLON,u.BABYLON,u.BABYLON,u.BABYLON,u.BABYLON))})(this,function(u,h,S,q,_,J,K,ee){"use strict";var ge=Object.defineProperty;var _e=(u,h,S)=>h in u?ge(u,h,{enumerable:!0,configurable:!0,writable:!0,value:S}):u[h]=S;var a=(u,h,S)=>(_e(u,typeof h!="symbol"?h+"":h,S),S);let W=null;const te=10;let N=null;const E=100;function*ne(i,t){let e=0,n=null;for(;;){const r=Date.now();if(r-e>=t){e=r;let s=i==null?void 0:i.getEngine().getRenderingCanvasClientRect();s?n=s:(n&&_.Logger.Warn("Canvas rect became null.  Returning last known value"),_.Logger.Warn("Failed to get canvas rect."))}yield n}}const ie=i=>(U(i),new Promise(t=>{let e=0;const n=setInterval(()=>{const r=W.next();r.value!==null?(clearInterval(n),t(r.value)):(e++,e>=te&&(clearInterval(n),_.Logger.Warn("Exceeded maximum number of attempts trying to get canvas rect"),t(null)))},500)})),D=i=>(U(i),W.next().value),U=i=>{(!W||i!==N)&&(W=ne(i,500),N=i)},re="Failed to update html mesh renderer position due to failure to get canvas rect.  HtmlMesh instances may not render correctly",F={width:0,height:0},k=i=>(t,e)=>{const n=t.getMesh(),r=e.getMesh(),s=n.isHtmlMesh,o=r.isHtmlMesh;return s?o&&n.absolutePosition.z<=r.absolutePosition.z?1:-1:o?1:i(t,e)};class se{constructor(t,{parentContainerId:e=null,_containerId:n="css-container",enableOverlayRender:r=!0,defaultOpaqueRenderOrder:s=q.RenderingGroup.PainterSortCompare,defaultAlphaTestRenderOrder:o=q.RenderingGroup.PainterSortCompare,defaultTransparentRenderOrder:l=q.RenderingGroup.defaultTransparentSortCompare}={}){a(this,"_maskRootNode");a(this,"_containerId");a(this,"_inSceneElements");a(this,"_overlayElements");a(this,"_cache",{cameraData:{fov:0,position:new h.Vector3,style:""},htmlMeshData:new WeakMap});a(this,"_width",0);a(this,"_height",0);a(this,"_widthHalf",0);a(this,"_heightHalf",0);a(this,"_cameraViewMatrix");a(this,"_projectionMatrix");a(this,"_cameraWorldMatrix");a(this,"_viewport");a(this,"_temp",{scaleTransform:new h.Vector3,rotationTransform:new h.Quaternion,positionTransform:new h.Vector3,objectMatrix:h.Matrix.Identity(),cameraWorldMatrix:h.Matrix.Identity(),cameraRotationMatrix:h.Matrix.Identity(),cameraWorldMatrixAsArray:new Array(16)});a(this,"_lastDevicePixelRatio",window.devicePixelRatio);a(this,"_cameraMatrixUpdated",!0);a(this,"_previousCanvasDocumentPosition",{top:0,left:0});a(this,"_renderObserver",null);a(this,"render",(t,e)=>{var g,b,w,P,H,j;let n=!1;const r=t.useRightHandedSystem;this.updateContainerPositionIfNeeded(t),this._cameraMatrixUpdated&&(this._cameraMatrixUpdated=!1,n=!0),(e.position.x!==this._cache.cameraData.position.x||e.position.y!==this._cache.cameraData.position.y||e.position.z!==this._cache.cameraData.position.z)&&(this._cache.cameraData.position.copyFrom(e.position),n=!0),window.devicePixelRatio!==this._lastDevicePixelRatio&&(this._lastDevicePixelRatio=window.devicePixelRatio,_.Logger.Log("In render - dpr changed: ",this._lastDevicePixelRatio),n=!0);const s=t.meshes.filter(f=>f.isHtmlMesh&&(n||f.requiresUpdate));if(n=n||s.length>0,!n)return;const l=e.getProjectionMatrix().m[5]*this._heightHalf;this._cache.cameraData.fov!==l&&(e.mode==S.Camera.PERSPECTIVE_CAMERA?[(g=this._overlayElements)==null?void 0:g.domElement,(b=this._inSceneElements)==null?void 0:b.domElement].forEach(f=>{f&&(f.style.webkitPerspective=l+"px",f.style.perspective=l+"px")}):[(w=this._overlayElements)==null?void 0:w.domElement,(P=this._inSceneElements)==null?void 0:P.domElement].forEach(f=>{f&&(f.style.webkitPerspective="",f.style.perspective="")}),this._cache.cameraData.fov=l),e.parent===null&&e.computeWorldMatrix();const c=this._temp.cameraWorldMatrix;c.copyFrom(e.getWorldMatrix());const d=this._temp.cameraRotationMatrix;c.getRotationMatrix().transposeToRef(d);const p=this._temp.cameraWorldMatrixAsArray;c.copyToArray(p);const m=r?1:-1;p[1]=d.m[1],p[2]=d.m[2]*m,p[4]=d.m[4]*m,p[6]=d.m[6]*m,p[8]=d.m[8]*m,p[9]=d.m[9]*m,h.Matrix.FromArrayToRef(p,0,c);const x=this.getCameraCSSMatrix(c);this._cache.cameraData.style!==x&&([(H=this._inSceneElements)==null?void 0:H.cameraElement,(j=this._overlayElements)==null?void 0:j.cameraElement].forEach(f=>{f&&(f.style.webkitTransform=x,f.style.transform=x)}),this._cache.cameraData.style=x),s.forEach(f=>{this.renderHtmlMesh(f,r)})});a(this,"onCameraMatrixChanged",t=>{this._cameraViewMatrix=t.getViewMatrix(),this._projectionMatrix=t.getProjectionMatrix(),this._cameraWorldMatrix=t.getWorldMatrix(),this._viewport=t.viewport,this._cameraMatrixUpdated=!0});typeof document>"u"||(this._containerId=n,this.init(t,e,r,s,o,l))}dispose(){var t,e;this._renderObserver&&(this._renderObserver.remove(),this._renderObserver=null),(t=this._overlayElements)==null||t.container.remove(),this._overlayElements=null,(e=this._inSceneElements)==null||e.container.remove(),this._inSceneElements=null}init(t,e,n,r,s,o){if(typeof document>"u")return;let l=e?document.getElementById(e):document.body;l||(l=document.body);const c=`${this._containerId}_in_scene`;if(this._inSceneElements=this.createRenderLayerElements(c),l.insertBefore(this._inSceneElements.container,l.firstChild),n){const y=`${this._containerId}_overlay`;this._overlayElements=this.createRenderLayerElements(y);const O=+(t.getEngine().getRenderingCanvas().style.zIndex??"0")+1;this._overlayElements.container.style.zIndex=`${O}`,this._overlayElements.container.style.pointerEvents="none",l.insertBefore(this._overlayElements.container,l.firstChild)}const{width:d,height:p}=D(t)??F;this.setSize(d,p);const m=t.getEngine(),x=(()=>{m.resize();const{width:y,height:O}=D(t)??F;this.setSize(y,O)}).bind(this);if("ResizeObserver"in window){const y=m.getRenderingCanvas();new ResizeObserver(ve=>{for(const ye of ve)ye.target===y&&x()}).observe(y)}else window.addEventListener("resize",x);const g=this.onCameraMatrixChanged.bind(this);let b,w;const P=()=>{const y=t.activeCamera;y&&(b=y.onProjectionMatrixChangedObservable.add(g),w=y.onViewMatrixChangedObservable.add(g))};P(),t.onActiveCameraChanged.add(()=>{var y,O;b&&((y=t.activeCamera)==null||y.onProjectionMatrixChangedObservable.remove(b)),w&&((O=t.activeCamera)==null||O.onViewMatrixChangedObservable.remove(w)),P()});const H=k(r),j=k(s),f=k(o);t.setRenderingOrder(0,H,j,f),this._renderObserver=t.onAfterRenderObservable.add(()=>{this.render(t,t.activeCamera)})}createRenderLayerElements(t){const e=document.getElementById(t);e&&e.remove();const n=document.createElement("div");n.id=t,n.style.position="absolute",n.style.width="100%",n.style.height="100%",n.style.zIndex="-1";const r=document.createElement("div");r.style.overflow="hidden";const s=document.createElement("div");return s.style.webkitTransformStyle="preserve-3d",s.style.transformStyle="preserve-3d",s.style.pointerEvents="none",r.appendChild(s),n.appendChild(r),{container:n,domElement:r,cameraElement:s}}getSize(){return{width:this._width,height:this._height}}setSize(t,e){this._width=t,this._height=e,this._widthHalf=this._width/2,this._heightHalf=this._height/2,[this._inSceneElements.domElement,this._overlayElements.domElement,this._inSceneElements.cameraElement,this._overlayElements.cameraElement].forEach(r=>{r&&(r.style.width=`${t}px`,r.style.height=`${e}px`)})}getCameraCSSMatrix(t){const e=t.m;return`matrix3d(${this.epsilon(e[0])},${this.epsilon(-e[1])},${this.epsilon(e[2])},${this.epsilon(e[3])},${this.epsilon(e[4])},${this.epsilon(-e[5])},${this.epsilon(e[6])},${this.epsilon(e[7])},${this.epsilon(e[8])},${this.epsilon(-e[9])},${this.epsilon(e[10])},${this.epsilon(e[11])},${this.epsilon(e[12])},${this.epsilon(-e[13])},${this.epsilon(e[14])},${this.epsilon(e[15])})`}getHtmlContentCSSMatrix(t,e){const n=t.m,r=e?-1:1;return`matrix3d(${this.epsilon(n[0])},${this.epsilon(n[1])},${this.epsilon(n[2]*-r)},${this.epsilon(n[3])},${this.epsilon(-n[4])},${this.epsilon(-n[5])},${this.epsilon(n[6]*r)},${this.epsilon(-n[7])},${this.epsilon(n[8]*-r)},${this.epsilon(n[9]*-r)},${this.epsilon(n[10])},${this.epsilon(n[11]*r)},${this.epsilon(n[12]*r)},${this.epsilon(n[13]*r)},${this.epsilon(n[14]*r)},${this.epsilon(n[15])})`}getTransformationMatrix(t,e){var $;if(this._cameraWorldMatrix||(this._cameraWorldMatrix=($=t.getScene().activeCamera)==null?void 0:$.getWorldMatrix()),!this._cameraWorldMatrix)return h.Matrix.Identity();const n=t.getWorldMatrix();let r=1,s=1;t.sourceWidth&&t.sourceHeight&&(r=t.width/(t.sourceWidth/E),s=t.height/(t.sourceHeight/E));const o=this._temp.scaleTransform,l=this._temp.rotationTransform,c=this._temp.positionTransform,d=this._temp.objectMatrix;n.decompose(o,l,c),o.x*=r,o.y*=s,h.Matrix.ComposeToRef(o,l,c,d);const p=e?-1:1,m=t.getAbsolutePosition();return d.setRowFromFloats(3,(-this._cameraWorldMatrix.m[12]+m.x)*E*p,(-this._cameraWorldMatrix.m[13]+m.y)*E*p,(this._cameraWorldMatrix.m[14]-m.z)*E,this._cameraWorldMatrix.m[15]*1e-5*E),d.multiplyAtIndex(3,E),d.multiplyAtIndex(7,E),d.multiplyAtIndex(11,E),d}renderHtmlMesh(t,e){var l,c;if(!t.element||!t.element.firstElementChild)return;let n=this._cache.htmlMeshData.get(t);n||(n={style:""},this._cache.htmlMeshData.set(t,n));const r=t._isCanvasOverlay?(l=this._overlayElements)==null?void 0:l.cameraElement:(c=this._inSceneElements)==null?void 0:c.cameraElement;t.element.parentNode!==r&&r.appendChild(t.element),t.requiresUpdate&&this.updateBaseScaleFactor(t);const s=this.getTransformationMatrix(t,e);let o=`translate(-50%, -50%) ${this.getHtmlContentCSSMatrix(s,e)}`;o+=`${e?"matrix3d(-1, 0, 0, 0, 0, 1, 0, 0, 0, 0, -1, 0, 0, 0, 0, 1)":""}`,n.style!==o&&(t.element.style.webkitTransform=o,t.element.style.transform=o),t.markAsUpdated()}updateBaseScaleFactor(t){let e=this._width,n=this._height;const r=(t.width||1)/(t.height||1),s=e/n;r>s?e=n*r:n=e/r,t.setContentSizePx(e,n)}async updateContainerPositionIfNeeded(t){var l,c;const e=await ie(t);if(!e){_.Logger.Warn(re);return}const n=window.scrollY,r=window.scrollX,s=e.top+n,o=e.left+r;(this._previousCanvasDocumentPosition.top!==s||this._previousCanvasDocumentPosition.left!==o)&&(this._previousCanvasDocumentPosition.top=s,this._previousCanvasDocumentPosition.left=o,[(l=this._inSceneElements)==null?void 0:l.container,(c=this._overlayElements)==null?void 0:c.container].forEach(d=>{if(!d)return;const p=d.offsetParent,m=p.getBoundingClientRect(),$=m.top+n,x=m.left+r,g=this.getAncestorMarginsAndPadding(p),b=window.getComputedStyle(document.body),w=parseInt(b.marginTop,10),P=parseInt(b.marginLeft,10);d.style.top=`${s-$-g.marginTop+g.paddingTop+w}px`,d.style.left=`${o-x-g.marginLeft+g.paddingLeft+P}px`}))}epsilon(t){return Math.abs(t)<1e-10?0:t}getAncestorMarginsAndPadding(t){let e=0,n=0,r=0,s=0;for(;t&&t!==document.body&&t!==document.documentElement;){const o=window.getComputedStyle(t);e+=parseInt(o.marginTop,10),n+=parseInt(o.marginLeft,10),r+=parseInt(o.paddingTop,10),s+=parseInt(o.paddingLeft,10),t=t.offsetParent}return{marginTop:e,marginLeft:n,paddingTop:r,paddingLeft:s}}}let R=[];const T=new Map;let I=[],v=null;const ae=()=>v,oe=(i,t,e)=>{if(C(`In pointerEventsCapture.requestCapture - Pointer events capture requested for ${i}`),he(i)){C(`In pointerEventsCapture.requestCapture - Capture request matched previous release request ${i}.  Cancelling capture request`);return}else i!==v&&ce(i,t,e);v||Y()},V=i=>{C(`In pointerEventsCapture.requestRelease - Pointer events release requested for ${i}`),!i||i===v?Y():de(i)?T.delete(i):(C(`In pointerEventsCapture.requestRelease - Received release request ${i} but no matching capture request was received`),I.includes(i)||I.push(i))},le=()=>{V(v)},ce=(i,t,e)=>{C(`In pointerEventsCapture.enqueueCaptureRequest - Enqueueing capture request for  ${i}`),R.includes(i)||(R.push(i),T.set(i,{capture:t,release:e}))},de=i=>{let t=!1;return R=R.filter(e=>e!==i?!0:(t=!0,C(`In pointerEventsCapture.cancelRequest - Canceling pointer events capture request ${i}`),!1)),t},he=i=>{let t=!1;return I=I.filter(e=>e!==i?!0:(t=!0,!1)),t},Y=()=>{const i=me();C(`In pointerEventsCapture.transferPointerEventsOwnership - Transferrring pointer events from ${v} to ${i}`),ue(),i&&pe(i)},ue=()=>{var i;C(`In pointerEventsCapture.doRelease - Releasing pointer events from ${v}`),v&&((i=T.get(v))==null||i.release(),T.delete(v),v=null)},pe=i=>{var t;i&&((t=T.get(i))==null||t.capture()),v=i,C(`In pointerEventsCapture.doCapture - Pointer events now captured by ${i}`)},me=()=>R.length>0?R.shift():null,C=i=>{(typeof window>"u"||window["pointer-events-capture-debug"])&&console.log(`${performance.now()} - game.scene.pointerEvents - ${i} `,`currentOwner: ${v}`,`queue: ${R}`,`unmatched: ${I}`)};let M=null,B=0;const A=new WeakMap,G=i=>{typeof document>"u"||(B===0&&(document.addEventListener("pointermove",L),document.addEventListener("touchstart",L),M=M??i,_.Logger.Log("PointerEventsCaptureBehavior: Starting observation of pointer move events."),M.onDisposeObservable.add(X)),B++)},X=()=>{document.removeEventListener("pointermove",L),document.removeEventListener("touchstart",L),M=null,_.Logger.Log("PointerEventsCaptureBehavior: Stopping observation of pointer move events."),B=0},Q=()=>{typeof document>"u"||M&&(B--,B<=0&&X())},L=i=>{if(!M)return;const t=D(M);if(!t)return;const{clientX:e,clientY:n}="touches"in i?i.touches[0]:i,r=e-t.left,s=n-t.top;let o;const l=M.pick(r,s,p=>{const m=A.get(p);return p.isEnabled()&&typeof m<"u"&&m._captureOnPointerEnter});let c;l.hit?c=l.pickedMesh:c=null;const d=parseInt(ae()||"");c&&c.uniqueId===d||(d&&(!c||c.uniqueId!==d)&&le(),c&&(o=A.get(c),o.capturePointerEvents()))};class Z{constructor(t,e,{captureOnPointerEnter:n=!0}={}){a(this,"name","PointerEventsCaptureBehavior");a(this,"attachedMesh");a(this,"_captureOnPointerEnter");this.captureCallback=t,this.releaseCallback=e,this.attachedMesh=null,this._captureOnPointerEnter=n,typeof document>"u"&&_.Logger.Warn("Creating an instance of PointerEventsCaptureBehavior outside of a browser.  The behavior will not work.")}set captureOnPointerEnter(t){this._captureOnPointerEnter!==t&&(this._captureOnPointerEnter=t,this.attachedMesh&&(this._captureOnPointerEnter?G(this.attachedMesh.getScene()):Q()))}init(){}attach(t){this.attachedMesh=t,A.set(t,this),this._captureOnPointerEnter&&G(t.getScene())}detach(){this.attachedMesh&&(A.delete(this.attachedMesh),this._captureOnPointerEnter&&Q(),this.attachedMesh=null)}dispose(){this.detach()}releasePointerEvents(){this.attachedMesh&&V(this.attachedMesh.uniqueId.toString())}capturePointerEvents(){this.attachedMesh&&oe(this.attachedMesh.uniqueId.toString(),this.captureCallback,this.releaseCallback)}}const z={CONTAIN:{wrapElement(i){const t=document.createElement("div");t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center";const e=document.createElement("div");return e.style.visibility="hidden",e.appendChild(i),t.appendChild(e),t},updateSize(i,t,e){const n=i.firstElementChild;i.style.width=`${t}px`,i.style.height=`${e}px`;const[r,s]=[n.offsetWidth,n.offsetHeight],o=Math.min(t/r,e/s);n.style.transform=`scale(${o})`,n.style.visibility="visible"}},COVER:{wrapElement(i){const t=document.createElement("div");t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t.style.overflow="hidden";const e=document.createElement("div");return e.style.visibility="hidden",e.appendChild(i),t.appendChild(e),t},updateSize(i,t,e){const n=i.firstElementChild;i.style.width=`${t}px`,i.style.height=`${e}px`;const[r,s]=[n.offsetWidth,n.offsetHeight],o=Math.max(t/r,e/s);n.style.transform=`scale(${o})`,n.style.visibility="visible"}},STRETCH:{wrapElement(i){const t=document.createElement("div");t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center";const e=document.createElement("div");return e.style.visibility="hidden",e.appendChild(i),t.appendChild(e),t},updateSize(i,t,e){const n=i.firstElementChild;i.style.width=`${t}px`,i.style.height=`${e}px`;const[r,s]=[n.offsetWidth,n.offsetHeight];n.style.transform=`scale(${t/r}, ${e/s})`,n.style.visibility="visible"}},NONE:{wrapElement(i){return i},updateSize(i,t,e){i&&(i.style.width=`${t}px`,i.style.height=`${e}px`)}}};class fe extends J.Mesh{constructor(e,n,{captureOnPointerEnter:r=!0,isCanvasOverlay:s=!1,fitStrategy:o=z.NONE}={}){super(n,e);a(this,"isHtmlMesh",!0);a(this,"_enabled",!1);a(this,"_ready",!1);a(this,"_isCanvasOverlay",!1);a(this,"_requiresUpdate",!0);a(this,"_element");a(this,"_width");a(this,"_height");a(this,"_fillerElement");a(this,"_inverseScaleMatrix",null);a(this,"_captureOnPointerEnter",!0);a(this,"_pointerEventCaptureBehavior",null);a(this,"sourceWidth",null);a(this,"sourceHeight",null);a(this,"worldMatrixUpdateObserver");a(this,"_fitStrategy",z.NONE);if(typeof document>"u"){_.Logger.Warn(`Creating an instance of an HtmlMesh with id ${n} outside of a browser.  The mesh will not be visible.`);return}this._fitStrategy=o,this._isCanvasOverlay=s,this.createMask(),this._element=this.createElement(),this.setEnabled(!0),this._captureOnPointerEnter=r,this._pointerEventCaptureBehavior=new Z(this.capturePointerEvents.bind(this),this.releasePointerEvents.bind(this),{captureOnPointerEnter:this._captureOnPointerEnter}),this.addBehavior(this._pointerEventCaptureBehavior)}get width(){return this._width}get height(){return this._height}get element(){return this._element}get requiresUpdate(){return this._requiresUpdate}set captureOnPointerEnter(e){this._captureOnPointerEnter=e,this._pointerEventCaptureBehavior&&(this._pointerEventCaptureBehavior.captureOnPointerEnter=e)}dispose(){var e;super.dispose(),(e=this._element)==null||e.remove(),this._element=void 0,this._pointerEventCaptureBehavior&&(this._pointerEventCaptureBehavior.dispose(),this._pointerEventCaptureBehavior=null)}markAsUpdated(){this._requiresUpdate=!1}setContent(e,n,r){this.setReady(!1),this.sourceWidth=null,this.sourceHeight=null,this._element&&(this._width=n,this._height=r,this._requiresUpdate=!0,this.scaling.set(1,1,-1),e&&(this._element.appendChild(this._fitStrategy.wrapElement(e)),this.updateScaleIfNecessary()),this.sourceWidth&&this.sourceHeight&&this.setReady(!0))}setEnabled(e){this._enabled=e,(!e||this._ready)&&this.doSetEnabled(e)}setContentSizePx(e,n){this.sourceWidth=e,this.sourceHeight=n,!(!this._element||!this._element.firstElementChild)&&(this._fitStrategy.updateSize(this._element.firstElementChild,e,n),this.updateScaleIfNecessary(),this.width&&this.height&&this.setReady(!0))}setReady(e){this._ready=e,e?this.doSetEnabled(this._enabled):this.doSetEnabled(!1)}doSetEnabled(e){var n;this._element&&(e&&!this.worldMatrixUpdateObserver?this.worldMatrixUpdateObserver=this.onAfterWorldMatrixUpdateObservable.add(()=>{this._requiresUpdate=!0}):e||((n=this.worldMatrixUpdateObserver)==null||n.remove(),this.worldMatrixUpdateObserver=null),this._element.style.display=e?"":"none",this.setElementZIndex(this.position.z*-1e4),super.setEnabled(e))}updateScaleIfNecessary(){this.scaling.set(1,1,-1),this._inverseScaleMatrix&&(this.bakeTransformIntoVertices(this._inverseScaleMatrix),this._inverseScaleMatrix=null);const e=this._width||1,n=this._height||1,r=h.Matrix.Scaling(e,n,1);this.bakeTransformIntoVertices(r),this._inverseScaleMatrix=new h.Matrix,r.invertToRef(this._inverseScaleMatrix)}createMask(){K.CreatePlaneVertexData({width:1,height:1}).applyToMesh(this);const n=this.getScene();this.checkCollisions=!0;const r=new ee.StandardMaterial(`${this.id}-mat`,n);this._isCanvasOverlay||(r.backFaceCulling=!1,r.disableColorWrite=!0,r.disableLighting=!0),this.material=r,this.material.freeze()}setElementZIndex(e){this._element&&(this._element.style.zIndex=`${e}`)}capturePointerEvents(){this._element&&(this._element.style.pointerEvents="auto",document.getElementsByTagName("body")[0].style.pointerEvents="none")}releasePointerEvents(){this._element&&(document.getElementsByTagName("body")[0].style.pointerEvents="auto",this._element.style.pointerEvents="none")}createElement(){if(typeof document>"u")return;const e=document.createElement("div");return e.id=this.id,e.style.backgroundColor=this._isCanvasOverlay?"transparent":"#000",e.style.zIndex="1",e.style.position="absolute",e.style.pointerEvents="none",e.style.backfaceVisibility="hidden",e}}u.FitStrategy=z,u.HtmlMesh=fe,u.HtmlMeshRenderer=se,u.PointerEventsCaptureBehavior=Z,Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})});
